app.controller("superDashboardCtrl",function(t,a,e,o,n,i){}),app.controller("clientsCtrl",function(t,a,e,o,n,i){t.clients=[],t.client={services:[{demo:""}]},t.client_id=0,t.init=function(){o.postCall({},"/api/superAdmin/get-clients").then(a=>{a.success&&(t.clients=a.clients)})},t.addClient=function(){o.postCall({client_id:t.client_id},"/api/superAdmin/edit-init").then(a=>{a.success&&(t.client=a.client),t.services=a.services})},t.addService=function(){t.client.services.push({demo:""})},t.removeService=function(a){1==confirm("Are you sure?")&&t.client.services.splice(a,1)},t.storeClient=function(){o.postCall(t.client,"/api/superAdmin/store-client").then(a=>{alert(a.message),a.success&&t.addClient()})}}),app.controller("cloackCtrl",function(t,a,e,o,n,i){t.loading=!1,t.aadhar_flag=!1,t.aadhar_fetch=!1,t.aadhar_upload_flag=!1,t.newAadharFlag=!1,t.users=[],t.filter={page_no:1,export:0},t.aadhar_details={},t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:"",no_of_bag:0,no_of_day:""},t.type=0,t.entry_id=0,t.check_shift="",t.pay_types=[],t.days=[],t.cloak_first_rate=0,t.cloak_second_rate=0,t.excel_loading="",t.d_count=0,t.productName="",t.init=function(){t.aadhar_fetch=!1,t.aadhar_flag=!1,t.newAadharFlag=!1,o.postCall(t.filter,"/api/cloak-rooms/init/"+t.type).then(a=>{a.success&&(t.pay_types=a.pay_types,t.l_entries=a.l_entries,t.days=a.days,t.cloak_first_rate=a.rate_list.first_rate,t.cloak_second_rate=a.rate_list.second_rate,t.d_count=a.d_count,t.updateCheckoutClass(),t.users=a.users,a.excel_link&&(t.excel_loading=!1,window.open(a.excel_link,"_blank")))}),t.productName="",$("#productName").focus()},t.getData=(a=>{t.filter.page_no=t.filter.page_no+a,t.init()}),t.export=(()=>{t.type=1,""!=t.filter.from_date&&""!=t.filter.to_date?(t.filter.export=1,t.excel_loading=!0,t.init()):alert("Please select both date")}),t.filterClear=function(){t.filter={page_no:1,export:0},t.init()},t.edit=function(a){t.entry_id=a,o.postCall({entry_id:t.entry_id},"/api/cloak-rooms/edit-init").then(a=>{a.success&&(t.formData=a.l_entry,$("#exampleModalCenter").modal("show"))})},t.checkoutCloak=function(a){t.entry_id=a,1==confirm("Are you sure?")&&o.postCall({entry_id:t.entry_id},"/api/cloak-rooms/checkout-init/1").then(a=>{a.timeOut?(t.formData=a.l_entry,t.formData.checkout_by="",$("#checkoutCloakModel").modal("show")):(t.init(),t.filter.id="",alert(a.message))})},t.checkoutCloak1=function(){o.postCall({productName:t.productName},"/api/cloak-rooms/checkout-init/2").then(a=>{t.productName="",a.timeOut?(t.formData=a.l_entry,t.entry_id=a.l_entry.id,$("#checkoutCloakModel").modal("show")):(t.init(),alert(a.message),t.filter.id="")})},t.handleKeyPress=function(a){13===a.which?(t.checkoutCloak1(),t.scannedValue.trim()&&(t.scannedValue="")):t.scannedValue=(t.scannedValue||"")+a.key},t.add=function(){t.entry_id=0,$("#exampleModalCenter").modal("show")},t.hideModal=(()=>{t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:"",no_of_bag:0,no_of_day:""},t.aadhar_fetch=!1,t.newAadharFlag=!1,t.aadhar_flag=!1,$("#exampleModalCenter").modal("hide"),$("#checkoutCloakModel").modal("hide")}),t.onSubmit=function(){t.loading=!0,t.aadhar_fetch=!1,t.aadhar_flag=!1,t.newAadharFlag=!1,o.postCall(t.formData,"/api/cloak-rooms/store").then(a=>{a.success&&(t.loading=!1,$("#exampleModalCenter").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:"",no_of_bag:0,no_of_day:""},t.init(),setTimeout(function(){window.open(base_url+"/admin/cloak-rooms/print-unq/1/"+a.print_id,"_blank")},800)),t.loading=!1})},t.onCheckOut=function(){t.loading=!0,o.postCall(t.formData,"/api/cloak-rooms/checkout-store").then(a=>{a.success&&($("#checkoutCloakModel").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:"",no_of_bag:0,no_of_day:""},t.init(),setTimeout(function(){window.open(base_url+"/admin/cloak-rooms/print/"+a.id,"_blank")},800)),t.loading=!1,t.aadhar_fetch=!1,t.newAadharFlag=!1,t.aadhar_flag=!1})},t.changeAmount=function(){var a=t.cloak_first_rate;t.formData.no_of_day>1?(a+=(t.formData.no_of_day-1)*t.cloak_second_rate,a*=t.formData.no_of_bag):a=a*t.formData.no_of_day*t.formData.no_of_bag,0==t.entry_id?t.formData.paid_amount=a:t.formData.balance_amount=a-t.formData.paid_amount},t.delete=function(a){1==confirm("Are you sure?")&&o.getCall("/api/cloak-rooms/delete/"+a).then(a=>{alert(a.message),t.init()})},t.fetchAadhar=function(){t.formData.aadhar_no&&(t.aadhar_fetch=!0,o.postCall(t.formData,"/api/aadhar/fetch").then(a=>{a.success?(t.newAadharFlag=a.newAadharFlag,t.aadhar_details=a.details,console.log(a.details),t.newAadharFlag||(t.formData.aadhar_no=t.aadhar_details.aadhar_no,t.formData.name=t.aadhar_details.name,t.formData.mobile_no=1*t.aadhar_details.mobile,t.aadhar_details.front?(t.formData.aadhar_front=t.aadhar_details.front,t.formData.aadhar_front_url=base_url+"/public/"+t.aadhar_details.front,t.formData.aadhar_back=t.aadhar_details.back,t.formData.aadhar_back_url=base_url+"/public/"+t.aadhar_details.back):t.newAadharFlag=!0),t.aadhar_flag=!0):t.aadhar_fetch=!1}))},t.uploadFile=function(a,e,o){o.pic_upload=!0;var i=base_url+"/api/aadhar/file-upload";n.upload({url:i,data:{media:a,name:e}}).then(function(t){t.data.success?(o[e]=t.data.path,o[e+"_url"]=t.data.url):alert(t.data.message),o.pic_upload=!1},function(t){console.log("Error status: "+t.status),o.pic_upload=!1},function(a){t.uploading_percentage=parseInt(100*a.loaded/a.total)+"%"})},t.removeFile=function(t,a){t[a]=""},t.updateCheckoutDarkClass=function(){const a=(new Date).getTime(),e=Math.floor(a/1e3);for(var o=0;o<t.l_entries.length;o++)t.l_entries[o].check_class="",0==t.l_entries[o].checkout_status&&(e>t.l_entries[o].str_checkout_time?t.l_entries[o].check_class="t-danger":e+600>t.l_entries[o].str_checkout_time?t.l_entries[o].check_class="t-warning":t.l_entries[o].check_class="t-info")},t.updateCheckoutClass=function(){const a=(new Date).getTime(),e=Math.floor(a/1e3);for(var o=0;o<t.l_entries.length;o++)t.l_entries[o].check_class="",0==t.l_entries[o].checkout_status&&(e>t.l_entries[o].str_checkout_time?t.l_entries[o].check_class="text-danger":e+600>t.l_entries[o].str_checkout_time?t.l_entries[o].check_class="text-warning":t.l_entries[o].check_class="")};var s=i(t.updateCheckoutClass,12e3);t.$on("$destroy",function(){s&&i.cancel(s)})}),app.controller("lockerCtrl",function(t,a,e,o){t.loading=!1,t.formData={name:"",mobile:"",paid_amount:0,no_of_day:"",locker_id:""},t.filter={},t.old_days=0,t.entry_id=0,t.check_shift="",t.pay_types=[],t.avail_lockers=[],t.days=[],t.rate_list={},t.sl_lockers=[],t.init=function(){o.postCall(t.filter,"/api/locker/init").then(a=>{a.success&&(t.pay_types=a.pay_types,t.l_entries=a.l_entries,t.avail_lockers=a.avail_lockers,t.days=a.days)})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.entry_id=a,t.sl_lockers=[],o.postCall({entry_id:t.entry_id},"/api/locker/edit-init").then(a=>{a.success&&(t.formData=a.l_entry,t.sl_lockers=a.sl_lockers,t.rate_list=a.rate_list,t.old_days=a.l_entry.no_of_day,$("#exampleModalCenter").modal("show"))})},t.checkoutLoker=function(a,e){t.entry_id=a,1==confirm("Are you sure?")&&o.postCall({entry_id:t.entry_id,freePenalty:e},"/api/locker/checkout-init").then(a=>{a.timeOut?(t.formData=a.l_entry,$("#checkoutLokerModel").modal("show")):t.init()})},t.add=function(){t.entry_id=0,t.sl_lockers=[],o.postCall({entry_id:0},"/api/locker/edit-init").then(a=>{t.rate_list=a.rate_list,$("#exampleModalCenter").modal("show")})},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide"),$("#checkoutLokerModel").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0}}),t.onSubmit=function(){t.loading=!0,0!=t.sl_lockers.length?(t.formData.sl_lockers=t.sl_lockers,o.postCall(t.formData,"/api/locker/store").then(a=>{a.success&&(t.loading=!1,$("#exampleModalCenter").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",paid_amount:0,no_of_day:"",locker_id:""},t.init(),setTimeout(function(){window.open(base_url+"/admin/locker/print/"+a.id,"_blank")},800)),t.loading=!1})):alert("Please select at least one locker")},t.onCheckOut=function(){t.loading=!0,o.postCall(t.formData,"/api/locker/checkout-store").then(a=>{a.success&&($("#checkoutLokerModel").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:""},t.init()),t.loading=!1})},t.changeAmount=function(){var a=t.rate_list.first_rate;t.formData.no_of_day>1&&(a+=(t.formData.no_of_day-1)*t.rate_list.second_rate),a=t.sl_lockers.length*a,0==t.entry_id?t.formData.paid_amount=a:t.formData.balance_amount=a-t.formData.paid_amount},t.delete=function(a){1==confirm("Are you sure?")&&o.getCall("/api/locker/delete/"+a).then(a=>{alert(a.message),t.init()})},t.insLocker=(a=>{let e=t.sl_lockers.indexOf(a);-1==e?t.sl_lockers.push(a):t.sl_lockers.splice(e,1),t.changeAmount()})}),app.controller("massageCtrl",function(t,a,e,o){t.loading=!1,t.formData={paid_amount:0,time_period:"",no_of_person:1},t.filter={},t.m_id=0,t.m_entries=[],t.rate_list={},t.init=function(){o.postCall(t.filter,"/api/massage/init").then(a=>{t.pay_types=a.pay_types,t.m_entries=a.m_entries,t.rate_list=a.rate_list})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.m_id=a,o.postCall({m_id:t.m_id},"/api/massage/edit-init").then(a=>{a.success&&(t.formData=a.m_entry,$("#massageModal").modal("show"))})},t.add=function(){$("#massageModal").modal("show")},t.hideModal=(()=>{$("#massageModal").modal("hide"),t.entry_id=0,t.formData={paid_amount:0,time_period:0,no_of_person:1},t.init()}),t.changeTime=function(){t.formData.paid_amount=0,10==t.formData.time_period&&(t.formData.paid_amount=t.rate_list.first_rate*t.formData.no_of_person),20==t.formData.time_period&&(t.formData.paid_amount=t.rate_list.second_rate*t.formData.no_of_person)},t.onSubmit=function(){t.loading=!0,o.postCall(t.formData,"/api/massage/store").then(a=>{a.success&&($("#massageModal").modal("hide"),t.entry_id=0,t.formData={paid_amount:0,time_period:0,no_of_person:1},t.init(),setTimeout(function(){window.open(base_url+"/admin/massage/print/"+a.id,"_blank")},800)),t.loading=!1})},t.delete=function(a){1==confirm("Are you sure")&&o.getCall("/api/massage/delete/"+a).then(a=>{alert(a.message),t.init()})}}),app.controller("sittingCtrl",function(t,a,e,o,n){t.loading=!1,t.formData={id:"",no_of_adults:0,no_of_baby_staff:0,no_of_children:0,name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:""},t.last_hour=1,t.filter={},t.checkout_number="",t.entry_id=0,t.pay_types=[],t.hours=[],t.rate_list={},t.checkout_process=!1,t.productName="",t.old_hr=0,t.checkout_th=0,t.setNullFormData=function(){t.formData={id:"",no_of_adults:0,no_of_baby_staff:0,no_of_children:0,name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:""},t.last_hour=1,t.old_hr=0},t.init=function(){t.setNullFormData(),o.postCall(t.filter,"/api/sitting/init").then(a=>{a.success&&(t.pay_types=a.pay_types,t.hours=a.hours,t.entries=a.entries,t.rate_list=a.rate_list,t.updateCheckoutClass()),$("#productName").focus()})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.checkout_process=!1,t.entry_id=a,t.setNullFormData(),o.postCall({entry_id:t.entry_id},"/api/sitting/edit-init").then(a=>{a.success&&(t.last_hour=a.sitting_entry.hours_occ,t.formData=a.sitting_entry,t.old_hr=a.sitting_entry.hours_occ,$("#exampleModalCenter").modal("show"))})},t.newEditCheckout=function(a){t.checkout_th=1,t.entry_id=a,1==confirm("Are you sure?")&&(t.setNullFormData(),o.postCall({checkout_id:a,checkout_th:t.checkout_th},"/api/sitting/checkout-new/1").then(a=>{a.success?(alert(a.message),t.init(),t.checkout_th=0):(t.formData=a.entry,t.checkout_process=!0,setTimeout(function(){$("#checkoutModal").modal("show")},800))}))},t.newEditCheckout1=function(){t.checkout_th=2,t.setNullFormData(),o.postCall({productName:t.productName,checkout_th:t.checkout_th},"/api/sitting/checkout-new/2").then(a=>{t.productName="",$checkout_loading=!1,a.success?(alert(a.message),t.init(),t.checkout_th=0):(t.entry_id=a.entry.id,t.formData=a.entry,t.checkout_process=!0,setTimeout(function(){$("#checkoutModal").modal("show")},800))})},t.handleKeyPress=function(a){13===a.which?(t.newEditCheckout1(),t.scannedValue.trim()&&(t.scannedValue="")):t.scannedValue=(t.scannedValue||"")+a.key},t.add=function(){t.entry_id=0,t.setNullFormData(),t.checkout_process=!1,$("#exampleModalCenter").modal("show")},t.hideModal=(()=>{t.entry_id=0,t.checkout_process=!1,t.setNullFormData(),$("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide")}),t.onSubmit=function(){t.loading=!0,o.postCall(t.formData,"/api/sitting/store").then(a=>{a.success?($("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide"),t.entry_id=0,t.setNullFormData(),t.last_hour=1,t.init(),setTimeout(function(){window.open(base_url+"/admin/sitting/print-unq/1/"+a.print_id,"_blank")},800),t.checkout_process=!1):alert(a.message),t.loading=!1})},t.onSubmitCheckout=function(){t.loading=!0,t.formData.checkout_th=t.checkout_th,o.postCall(t.formData,"/api/sitting/checkout-store").then(a=>{a.success?($("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide"),t.entry_id=0,t.new_checkout_id=0,t.productName="",t.setNullFormData(),t.last_hour=1,t.checkout_th=0,t.init(),setTimeout(function(){window.open(base_url+"/admin/sitting/print-unq/2/"+a.print_id,"_blank")},800),t.checkout_process=!1):alert(a.message),t.loading=!1})},t.changeAmount=function(){if(t.formData.total_amount=0,t.formData.hours_occ>0){var a=t.formData.hours_occ-1;t.formData.no_of_adults>0&&(t.formData.total_amount+=t.rate_list.adult_rate*t.formData.no_of_adults,t.formData.total_amount+=a*t.rate_list.adult_rate_sec*t.formData.no_of_adults,console.log(t.formData.total_amount)),t.formData.no_of_children>0&&(t.formData.total_amount+=t.rate_list.child_rate*t.formData.no_of_children,t.formData.total_amount+=a*t.rate_list.child_rate_sec*t.formData.no_of_children,console.log(t.formData.total_amount))}t.formData.balance_amount=t.formData.total_amount-t.formData.paid_amount,t.geValTime()},t.geValTime=function(){o.postCall({entry_id:t.entry_id,hours_occ:t.formData.hours_occ},"/api/sitting/cal-check").then(a=>{a.success&&(t.formData.show_valid_up=a.show_valid_up)})},t.updateCheckoutClass=function(){const a=(new Date).getTime();console.log(a+"mm second");const e=Math.floor(a/1e3);console.log(e+"uu second");for(var o=0;o<t.entries.length;o++)t.entries[o].check_class="",0==t.entries[o].checkout_status&&(e>t.entries[o].str_checkout_time?t.entries[o].check_class="t-danger":e+600>t.entries[o].str_checkout_time?t.entries[o].check_class="t-warning":t.entries[o].check_class="t-info")};var i=n(t.updateCheckoutClass,12e3);t.$on("$destroy",function(){i&&n.cancel(i)})}),app.controller("reclinerCtrl",function(t,a,e,o,n){t.loading=!1,t.formData={id:"",no_of_adults:0,no_of_baby_staff:0,no_of_children:0,name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:""},t.last_hour=1,t.filter={},t.checkout_number="",t.entry_id=0,t.pay_types=[],t.hours=[],t.rate_list={},t.checkout_process=!1,t.productName="",t.old_hr=0,t.checkout_th=0,t.avail_recliners=[],t.sl_recliners=[],t.setNullFormData=function(){t.formData={id:"",no_of_adults:0,no_of_baby_staff:0,no_of_children:0,name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:""},t.last_hour=1,t.old_hr=0,t.sl_recliners=[]},t.init=function(){t.setNullFormData(),o.postCall(t.filter,"/api/recliners/init").then(a=>{a.success&&(t.pay_types=a.pay_types,t.hours=a.hours,t.entries=a.entries,t.rate_list=a.rate_list,t.avail_recliners=a.avail_recliners,t.updateCheckoutClass()),$("#productName").focus()})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.checkout_process=!1,t.entry_id=a,t.setNullFormData(),o.postCall({entry_id:t.entry_id},"/api/recliners/edit-init").then(a=>{a.success&&(t.last_hour=a.rec_entry.hours_occ,t.formData=a.rec_entry,t.old_hr=a.rec_entry.hours_occ,t.sl_recliners=a.sl_recliners,$("#exampleModalCenter").modal("show"))})},t.newEditCheckout=function(a){t.checkout_th=1,t.entry_id=a,1==confirm("Are you sure?")&&(t.setNullFormData(),o.postCall({checkout_id:a,checkout_th:t.checkout_th},"/api/recliners/checkout-new/1").then(a=>{a.success?(alert(a.message),t.init(),t.checkout_th=0):(t.formData=a.entry,t.checkout_process=!0,setTimeout(function(){$("#checkoutModal").modal("show")},800))}))},t.newEditCheckout1=function(){t.checkout_th=2,t.setNullFormData(),o.postCall({productName:t.productName,checkout_th:t.checkout_th},"/api/recliners/checkout-new/2").then(a=>{t.productName="",$checkout_loading=!1,a.success?(alert(a.message),t.init(),t.checkout_th=0):(t.entry_id=a.entry.id,t.formData=a.entry,t.checkout_process=!0,setTimeout(function(){$("#checkoutModal").modal("show")},800))})},t.handleKeyPress=function(a){13===a.which?(t.newEditCheckout1(),t.scannedValue.trim()&&(t.scannedValue="")):t.scannedValue=(t.scannedValue||"")+a.key},t.add=function(){t.entry_id=0,t.setNullFormData(),t.checkout_process=!1,$("#exampleModalCenter").modal("show")},t.hideModal=(()=>{t.entry_id=0,t.checkout_process=!1,t.setNullFormData(),$("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide")}),t.onSubmit=function(){0!=t.sl_recliners.length?(t.formData.sl_recliners=t.sl_recliners,t.loading=!0,o.postCall(t.formData,"/api/recliners/store").then(a=>{a.success?($("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide"),t.entry_id=0,t.setNullFormData(),t.last_hour=1,t.init(),setTimeout(function(){window.open(base_url+"/admin/recliners/print-unq/1/"+a.print_id,"_blank")},800),t.checkout_process=!1):alert(a.message),t.loading=!1})):alert("Please select at least one Recliner")},t.onSubmitCheckout=function(){t.loading=!0,t.formData.checkout_th=t.checkout_th,o.postCall(t.formData,"/api/recliners/checkout-store").then(a=>{a.success?($("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide"),t.entry_id=0,t.new_checkout_id=0,t.productName="",t.setNullFormData(),t.last_hour=1,t.checkout_th=0,t.init(),setTimeout(function(){window.open(base_url+"/admin/recliners/print-unq/2/"+a.print_id,"_blank")},800),t.checkout_process=!1):alert(a.message),t.loading=!1})},t.changeAmount=function(){if(t.formData.total_amount=0,t.formData.hours_occ>0){var a=t.formData.hours_occ-1;t.formData.total_amount+=t.rate_list.second_rate*t.sl_recliners.length,t.formData.total_amount+=a*t.rate_list.second_rate*t.sl_recliners.length}t.formData.balance_amount=t.formData.total_amount-t.formData.paid_amount,t.geValTime()},t.geValTime=function(){o.postCall({entry_id:t.entry_id,hours_occ:t.formData.hours_occ},"/api/recliners/cal-check").then(a=>{a.success&&(t.formData.show_valid_up=a.show_valid_up)})},t.updateCheckoutClass=function(){const a=(new Date).getTime(),e=Math.floor(a/1e3);for(var o=0;o<t.entries.length;o++)t.entries[o].check_class="",0==t.entries[o].checkout_status&&(e>t.entries[o].str_checkout_time?t.entries[o].check_class="t-danger":e+600>t.entries[o].str_checkout_time?t.entries[o].check_class="t-warning":t.entries[o].check_class="t-info")};var i=n(t.updateCheckoutClass,12e3);t.$on("$destroy",function(){i&&n.cancel(i)}),t.insRec=(a=>{console.log(a);let e=t.sl_recliners.indexOf(a);-1==e?t.sl_recliners.push(a):t.sl_recliners.splice(e,1),t.changeAmount()})}),app.controller("shiftCtrl",function(t,a,e,o){t.loading=!1,t.sitting_data=[],t.cloak_data=[],t.canteen_data=[],t.massage_data=[],t.locker_data=[],t.recliner_data=[],t.scanning_data=[],t.pod_data=[],t.singal_cabin_data=[],t.double_bed_data=[],t.rest_data=[],t.service_ids=[],t.clients=[],t.filter={input_date:"",user_id:"",client_id:""},t.clear=function(){t.filter={input_date:"",user_id:"",client_id:""},t.init()},t.changeFilter=function(){t.filter.user_id="",t.init()},t.serach=function(){t.init()},t.users=[],t.init=function(){t.loading=!1,o.postCall(t.filter,"/api/shift/init").then(a=>{a.success&&(t.users=a.users,t.clients=a.clients,t.service_ids=a.service_ids,t.sitting_data=a.sitting_data,t.cloak_data=a.cloak_data,t.canteen_data=a.canteen_data,t.massage_data=a.massage_data,t.locker_data=a.locker_data,t.recliner_data=a.recliner_data,t.scanning_data=a.scanning_data,t.pod_data=a.pod_data,t.singal_cabin_data=a.singal_cabin_data,t.double_bed_data=a.double_bed_data,t.rest_data=a.rest_data,t.total_shift_upi=a.total_shift_upi,t.total_shift_cash=a.total_shift_cash,t.total_collection=a.total_collection,t.last_hour_upi_total=a.last_hour_upi_total,t.last_hour_cash_total=a.last_hour_cash_total,t.last_hour_total=a.last_hour_total,t.change_data=a.chage_pay_type_data,t.check_shift=a.check_shift,t.shift_date=a.shift_date),t.loading=!0})}}),app.controller("userCtrl",function(t,a,e,o){t.loading=!1,t.add_new_flag=!1,t.formData={name:"",email:"",mobile:"",password:"",confirm_password:""},t.filter={},t.user_id=0,t.users=[],t.init=function(){o.postCall(t.filter,"/api/users/init").then(a=>{t.users=a.users,t.add_new_flag=a.add_new_flag})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.user_id=a,o.postCall({user_id:t.user_id},"/api/users/edit-init").then(a=>{a.success&&(t.formData=a.user,$("#userModal").modal("show"))})},t.activeUser=function(a,e){1==confirm("Are you sure?")&&o.postCall({user_id:a.id},"/api/users/active-user").then(o=>{o.success&&(t.users[e].active=0==a.active?1:0),alert(o.message)})},t.hideModal=(()=>{$("#userModal").modal("hide"),t.user_id=0,t.formData={name:"",email:"",mobile:"",password:"",confirm_password:""},t.init()}),t.add=(()=>{$("#userModal").modal("show"),t.user_id=0,t.formData={name:"",email:"",mobile:"",password:"",confirm_password:""}}),t.onSubmit=function(){t.loading=!0,o.postCall(t.formData,"/api/users/store").then(a=>{a.success?(alert(a.message),$("#userModal").modal("hide"),t.formData={name:"",email:"",mobile:"",password:"",confirm_password:""},t.init()):alert(a.message),t.loading=!1})}}),app.controller("canteenItemsCtrl",function(t,a,e,o){t.loading=!1,t.formData={item_name:"",item_short_name:"",price:"",barcodevalue:""},t.stockData={stock:""},t.filter={barcodevalue_search:""},t.canteen_item_id=0,t.canteen_item_stock_id=0,t.canteen_items=[],t.init=function(){o.postCall(t.filter,"/api/canteen-items/init").then(a=>{t.canteen_items=a.canteen_items,$("#barcodevalue").focus()})},t.filterClear=function(){t.filter={barcodevalue_search:""},t.init()},t.edit=function(a){t.canteen_item_id=a,o.postCall({canteen_item_id:t.canteen_item_id},"/api/canteen-items/edit").then(a=>{a.success&&(t.formData=a.canteen_item,$("#exampleModalCenter").modal("show"))})},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide"),t.canteen_item_id=0,t.formData={item_name:"",item_short_name:"",price:"",barcodevalue:""},t.init()}),t.add=(()=>{t.canteen_item_id=0,t.formData={item_name:"",item_short_name:"",price:""},$("#barcodevalue").focus(),setTimeout(function(){$("#exampleModalCenter").modal("show")},300)}),t.onSubmit=function(){console.log(t.formData),t.loading=!0,o.postCall(t.formData,"/api/canteen-items/store").then(a=>{a.success?(alert(a.message),$("#exampleModalCenter").modal("hide"),t.formData={item_name:"",item_short_name:"",price:"",barcodevalue:""},t.init()):alert(a.message),t.loading=!1})},t.initStocks=function(){t.filter.canteen_item_id=t.canteen_item_id,console.log(t.filter+"hello"),o.postCall(t.filter,"/api/canteen-items/stocks/init").then(a=>{t.item_stocks=a.item_stocks})},t.hideStockModal=(()=>{$("#stockModal").modal("hide"),t.stockData={stock:""},t.initStocks()}),t.addStock=(()=>{$("#stockModal").modal("show"),t.stockData={stock:""}}),t.editStock=function(a){t.canteen_item_stock_id=a,o.postCall({canteen_item_stock_id:t.canteen_item_stock_id},"/api/canteen-items/stocks/edit").then(a=>{a.success&&(t.stockData=a.item_stock,$("#stockModal").modal("show"))})},t.onStockSubmit=function(){t.loading=!0,t.stockData.canteen_item_id=t.canteen_item_id,o.postCall(t.stockData,"/api/canteen-items/stocks/store").then(a=>{a.success?(alert(a.message),$("#stockModal").modal("hide"),t.stockData={stock:""},t.initStocks()):alert(a.message),t.loading=!1})}}),app.controller("dailyEntryCtrl",function(t,a,e,o){t.loading=!1,t.formData={name:"",mobile:"",pay_type:"",total_amount:0,total_item:0,products:[{demo:""}]},t.products=[],t.product={canteen_item_id:0,item_name:"",quantity:1},t.filter={},t.entry_id=0,t.daily_entries=[],t.canteen_items=[],t.selectConfig={valueField:"barcodevalue",labelField:"item_name",maxItems:1,searchField:"item_name",create:!1,onInitialize:function(t){}},t.setNull=(()=>{t.entry_id=0,t.formData={name:"",mobile:"",pay_type:"",total_amount:0,total_item:0,products:[{demo:""}]},t.products=[],t.product={canteen_item_id:0,item_name:"",quantity:1},t.productname=""}),t.init=function(){o.postCall(t.filter,"/api/daily-entries/init").then(a=>{t.daily_entries=a.daily_entries,t.canteen_items=a.canteen_items,$("#productname").focus(),t.setNull()})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.setNull(),t.entry_id=a,o.postCall({entry_id:t.entry_id},"/api/daily-entries/edit-init").then(a=>{a.success&&(t.formData=a.s_entry,$("#exampleModalCenter").modal("show"))})},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide"),t.entry_id=0,t.init()}),t.add=(()=>{$("#productname").focus(),t.setNull(),setTimeout(function(){$("#exampleModalCenter").modal("show")},300)}),t.onSubmit=function(){t.formData.products=t.products,0!=t.products.length?""!=t.formData.pay_type?0!=t.formData.total_amount?(t.loading=!0,o.postCall(t.formData,"/api/daily-entries/store").then(a=>{a.success?(alert(a.message),$("#exampleModalCenter").modal("hide"),t.products=[],t.init(),setTimeout(function(){window.open(base_url+"/admin/daily-entries/print/"+a.entry_id,"_blank")},800)):alert(a.message),t.loading=!1})):alert("Please select at least one item"):alert("Plese select the pay type"):alert("Plese select at least one item.")},t.onAddProdcut=(()=>{let a=t.products;var e=t.canteen_items.find(a=>a.barcodevalue==t.productname);let o=-1;a.length>0&&(o=a.findIndex(a=>a.barcodevalue==t.productname)),e.paid_amount=1*e.price,e.quantity=1,a.push(e),t.product={canteen_item_id:0,item_name:"",quantity:1},t.products=a;for(var n=0,i=0,s=0;s<t.products.length;s++){var l=t.products[s];n+=l.paid_amount,i+=l.quantity}t.formData.total_amount=n,t.formData.total_item=i,t.productname="",$("#productname").focus()}),t.removeItem=(a=>{t.product=t.products[a],t.formData.total_amount=t.formData.total_amount-t.product.paid_amount,t.formData.total_item=t.products.length-1,t.products.splice(a,1)}),t.handleKeyPress=function(a){13===a.which?(t.onAddProdcut(),t.scannedValue.trim()&&(t.scannedValue="")):t.scannedValue=(t.scannedValue||"")+a.key}}),app.controller("cloackPenltyCollectCtrl",function(t,a,e,o){t.loading=!1,t.formData={id:0,no_of_bag:0,total_bag:0},t.pData={},t.init=function(){o.postCall(t.filter,"/api/collect-cloak/init").then(a=>{a.success&&(t.l_entries=a.l_entries,t.penlty_list=a.penlty_list,t.penalty_sum=a.penalty_sum,t.c_sum=a.c_sum)})},t.filterClear=function(){t.filter={},t.init()},t.collectCloak=function(a){t.formData.id=a.id,t.formData.total_bag=a.total_bag,t.formData.no_of_bag=a.no_of_bag,$("#exampleModalCenter").modal("show")},t.onSubmit=function(){t.loading=!0,o.postCall(t.formData,"/api/collect-cloak/store").then(a=>{a.success?(alert(a.message),$("#exampleModalCenter").modal("hide"),t.formData={id:0,no_of_bag:0,total_bag:0},t.init()):alert(a.message),t.loading=!1})},t.onPSubmit=function(a){t.ploading=!0,t.pData=a,o.postCall(t.pData,"/api/collect-cloak/store-pen").then(a=>{a.success?(alert(a.message),t.pData={},t.init()):alert(a.message),t.ploading=!1})}}),app.controller("sittingCollectCtrl",function(t,a,e,o){t.loading=!1,t.formData={id:0,no_of_bag:0,total_bag:0},t.checked={},t.pData={},t.entries=[],t.init=function(){o.postCall(t.filter,"/api/collect-sitting/init").then(a=>{a.success&&(t.entries=a.entries,t.e_entries_list=a.e_entries_list,t.c_sum=a.c_sum,t.e_ent_sum=a.e_ent_sum,t.checked=a.checked)})},t.filterClear=function(){t.filter={},t.init()},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide")}),t.collectSit=function(a){t.formData.id=a.id,t.formData.total_no_of_adults=a.no_of_adults,t.formData.no_of_adults=a.no_of_adults,t.formData.total_no_of_children=a.no_of_children,t.formData.no_of_children=a.no_of_children,t.formData.hours_occ=a.hours_occ,t.formData.total_hours=a.total_hours,$("#exampleModalCenter").modal("show")},t.onSubmit=function(){t.loading=!0,o.postCall(t.formData,"/api/collect-sitting/store").then(a=>{a.success?(alert(a.message),$("#exampleModalCenter").modal("hide"),t.formData={id:0,no_of_bag:0,total_bag:0},t.init()):alert(a.message),t.loading=!1})},t.onPSubmit=function(a){t.ploading=!0,t.pData=a,o.postCall(t.pData,"/api/collect-sitting/store-pen").then(a=>{a.success?(alert(a.message),t.pData={},t.init()):alert(a.message),t.ploading=!1})}}),app.controller("entryRoomCtrl",function(t,a,e,o,n){t.loading=!1,t.formData={name:"",mobile:"",paid_amount:0,no_of_day:"",locker_id:"",discount_amount:0},t.type=0,t.filter={},t.entry_id=0,t.check_shift="",t.pay_types=[],t.avail_pods=[],t.avail_cabins=[],t.avail_beds=[],t.hours=[],t.sl_pods=[],t.sl_cabins=[],t.sl_beds=[],t.total_amount=0,t.paid_amount=0,t.balance_amount=0,t.init=function(){o.postCall(t.filter,"/api/rooms/init/"+t.type).then(a=>{a.success&&(t.pay_types=a.pay_types,t.entries=a.entries,t.avail_pods=a.avail_pods,t.avail_cabins=a.avail_cabins,t.avail_beds=a.avail_beds,t.hours=a.hours,t.updateCheckoutClass())})},t.filterClear=function(){t.filter={},t.init()},t.edit=function(a){t.entry_id=a,t.sl_pods=[],t.sl_cabins=[],t.sl_beds=[],o.postCall({entry_id:t.entry_id},"/api/rooms/edit-init").then(a=>{a.success&&(console.log(a.l_entry.discount_amount+"hhhhh"),t.formData=a.l_entry,t.total_amount=a.l_entry.total_amount,t.sl_pods=a.sl_pods,t.sl_cabins=a.sl_cabins,t.sl_beds=a.sl_beds,$("#exampleModalCenter").modal("show"))})},t.checkoutLoker=function(a,e){t.entry_id=a,alert(e),1==confirm("Are you sure?")&&o.postCall({entry_id:t.entry_id,freePenalty:e},"/api/rooms/checkout-init").then(a=>{a.timeOut?(t.formData=a.l_entry,$("#checkoutModal").modal("show")):t.init()})},t.add=function(){t.entry_id=0,t.sl_pods=[],t.sl_cabins=[],t.sl_beds=[],t.formData={name:"",mobile:"",paid_amount:0,total_amount:0,balance_amount:0,hours_occ:"",discount_amount:0},$("#exampleModalCenter").modal("show")},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide"),$("#checkoutModal").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",paid_amount:0,total_amount:0,balance_amount:0,hours_occ:"",discount_amount:0},t.sl_pods=[],t.sl_beds=[],t.sl_cabins=[]}),t.onSubmit=function(){t.formData.type=t.type,1!=t.type||0!=t.sl_pods.length?2!=t.type||0!=t.sl_cabins.length?3!=t.type||0!=t.sl_beds.length?(t.loading=!0,1==t.type&&(t.formData.sl_pods=t.sl_pods),2==t.type&&(t.formData.sl_cabins=t.sl_cabins),3==t.type&&(t.formData.sl_beds=t.sl_beds),o.postCall(t.formData,"/api/rooms/store/"+t.type).then(a=>{a.success&&(t.loading=!1,$("#exampleModalCenter").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",paid_amount:0,total_amount:0,balance_amount:0,hours_occ:"",discount_amount:0},t.sl_pods=[],t.sl_beds=[],t.sl_cabins=[],t.init(),setTimeout(function(){window.open(base_url+"/admin/rooms/print/"+a.id,"_blank")},800)),t.loading=!1})):alert("Please select at least one double bed"):alert("Please select at least one single cabins"):alert("Please select at least one pods")},t.onCheckOut=function(){t.loading=!0,o.postCall(t.formData,"/api/rooms/checkout-store").then(a=>{a.success&&($("#checkoutModal").modal("hide"),t.entry_id=0,t.formData={name:"",mobile:"",total_amount:0,paid_amount:0,balance_amount:0,hours_occ:0,check_in:"",check_out:"",discount_amount:0},t.init(),setTimeout(function(){
window.open(base_url+"/admin/rooms/print/"+a.entry_id,"_blank")},800)),t.loading=!1})},t.changeAmount=(()=>{1==t.type&&t.changeAmountPod(),2==t.type&&t.changeAmountCabin(),3==t.type&&t.changeAmountBed()}),t.changeAmountPod=(()=>{var a=0;6==t.formData.hours_occ?a=299*t.sl_pods.length:12==t.formData.hours_occ?a=499*t.sl_pods.length:24==t.formData.hours_occ&&(a=799*t.sl_pods.length),t.total_amount=a,t.formData.total_amount=a,0==t.entry_id?(t.formData.discount_amount>0?t.formData.paid_amount=a-t.formData.discount_amount:t.formData.paid_amount=a,t.formData.balance_amount=a-t.formData.paid_amount):t.formData.balance_amount=a-(t.formData.paid_amount+t.formData.discount_amount)}),t.changeAmountCabin=(()=>{var a=0;6==t.formData.hours_occ?a=399*t.sl_cabins.length:12==t.formData.hours_occ?a=599*t.sl_cabins.length:24==t.formData.hours_occ&&(a=1199*t.sl_cabins.length),t.total_amount=a,t.formData.total_amount=a,0==t.entry_id?(t.formData.discount_amount>0?t.formData.paid_amount=a-t.formData.discount_amount:t.formData.paid_amount=a,t.formData.balance_amount=a-t.formData.paid_amount):t.formData.balance_amount=a-(t.formData.paid_amount+t.formData.discount_amount)}),t.changeAmountBed=(()=>{var a=0;6==t.formData.hours_occ?a=599*t.sl_beds.length:12==t.formData.hours_occ?a=899*t.sl_beds.length:24==t.formData.hours_occ&&(a=1699*t.sl_beds.length),t.total_amount=a,t.formData.total_amount=a,0==t.entry_id?(t.formData.discount_amount>0?t.formData.paid_amount=a-t.formData.discount_amount:t.formData.paid_amount=a,t.formData.balance_amount=a-t.formData.paid_amount):t.formData.balance_amount=a-(t.formData.paid_amount+t.formData.discount_amount),t.balance_amount=t.formData.balance_amount}),t.delete=function(a){1==confirm("Are you sure?")&&o.getCall("/api/rooms/delete/"+a).then(a=>{alert(a.message),t.init()})},t.insPods=(a=>{let e=t.sl_pods.indexOf(a);-1==e?t.sl_pods.push(a):t.sl_pods.splice(e,1),t.changeAmountPod()}),t.insCabins=(a=>{let e=t.sl_cabins.indexOf(a);-1==e?t.sl_cabins.push(a):t.sl_cabins.splice(e,1),t.changeAmountCabin()}),t.insBeds=(a=>{let e=t.sl_beds.indexOf(a);-1==e?t.sl_beds.push(a):t.sl_beds.splice(e,1),t.changeAmountBed()}),t.disAmount=(()=>{if(t.formData.discount_amount>0&&t.formData.total_amount>0)if(0==t.entry_id)t.formData.paid_amount=t.total_amount-t.formData.discount_amount;else{var a=parseInt(t.formData.paid_amount)+parseInt(t.formData.discount_amount);t.formData.balance_amount=t.total_amount-a}}),t.updateCheckoutClass=function(){const a=(new Date).getTime(),e=Math.floor(a/1e3);for(var o=0;o<t.entries.length;o++)t.entries[o].check_class="",0==t.entries[o].checkout_status&&(e>t.entries[o].str_checkout_time?t.entries[o].check_class="t-danger":e+1200>t.entries[o].str_checkout_time?t.entries[o].check_class="t-warning":t.entries[o].check_class="t-info")};var i=n(t.updateCheckoutClass,12e3);t.$on("$destroy",function(){i&&n.cancel(i)})}),app.controller("allRoomEntryCtrl",function(t,a,e,o){t.loading=!1,t.filter={},t.entries=[{}],$l_entry={},t.init=function(){o.postCall(t.filter,"/api/rooms/init-all").then(a=>{a.success&&(t.entries=a.entries)})},t.initSingleEntry=function(a){o.postCall({entry_id:a},"/api/rooms/init-single-entry").then(a=>{a.success&&(t.l_entry=a.l_entry,$("#viewModal").modal("show"))})},t.hideModal=function(){$("#viewModal").modal("hide")},t.deleteEntry=function(t,a){console.log(t,a),o.getCall("/api/rooms/delete-e-entry/"+t+"/"+a).then(t=>{t.success,$("#viewModal").modal("hide")})},t.filterClear=function(){t.filter={},t.init()}}),app.controller("clientSettingCtrl",function(t,a,e,o){t.loading=!1,t.processing=!1,t.filter={},t.clients=[],t.init=function(){o.postCall(t.filter,"/api/clients/init-amount-setting").then(a=>{a.success&&(t.clients=a.clients)})},t.onSubmit=function(){t.processing=!0,o.postCall({clients:t.clients},"/api/clients/store-amount-setting").then(a=>{a.success&&t.init(),alert(a.message),t.processing=!1})},t.shiftStatus=function(){t.processing=!0,o.postCall(t.filter,"/api/clients/shift-status").then(a=>{a.success&&(t.shift_rows=a.shift_rows)})}}),app.controller("scanningCtrl",function(t,a,e,o){t.loading=!1,t.processing=!1,t.filter={},t.entries=[],t.incoming_types=[],t.item_types=[],t.rate_list=[],t.formData={name:"",paid_amount:0},t.init=function(){o.postCall(t.filter,"/api/scanning/init").then(a=>{a.success&&(t.entries=a.entries,t.incoming_types=a.incoming_types,t.item_types=a.item_types,t.rate_list=a.rate_list)})},t.add=(()=>{$("#exampleModalCenter").modal("show")}),t.filterClear=function(){t.filter={},t.init()},t.hideModal=(()=>{$("#exampleModalCenter").modal("hide"),t.formData.name="",t.formData.paid_amount=0}),t.onSubmit=function(){t.processing=!0,o.postCall(t.formData,"/api/scanning/store").then(a=>{a.success?(t.init(),t.hideModal(),setTimeout(function(){window.open(base_url+"/admin/scanning/print/"+a.print_id,"_blank")},800)):alert(a.message),t.processing=!1})},t.calAmount=(()=>{var a=t.rate_list.find(a=>a.item_type_id==t.formData.item_type_id&&a.incoming_type_id==t.formData.incoming_type_id);t.formData.paid_amount=t.formData.no_of_item*a.rate})}),app.controller("restCtrl",function(t,a,e,o){t.loading=!1,t.processing=!1,t.formData={pay_type:1,no_of_hours:1,no_of_people:1,paid_amount:0},t.filter={},t.entries=[],t.rate_list={},t.init=function(){o.postCall(t.filter,"/api/rest/init").then(a=>{a.success&&(t.pay_types=a.pay_types,t.entries=a.entries,t.rate_list=a.rate_list,t.formData.paid_amount=t.formData.no_of_hours*t.rate_list.first_rate)})},t.filterClear=function(){t.filter={},t.init()},t.calAmount=function(){t.formData.paid_amount=t.formData.no_of_people*t.formData.no_of_hours*t.rate_list.first_rate},t.onSubmit=function(){t.processing=!0,o.postCall(t.formData,"/api/rest/store").then(a=>{a.success&&(t.formData={pay_type:1,no_of_hours:1,no_of_people:1,paid_amount:0},t.init(),setTimeout(function(){window.open(base_url+"/admin/rest/print/"+a.id,"_blank")},800)),t.processing=!1})}});